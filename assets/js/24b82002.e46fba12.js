"use strict";(globalThis.webpackChunk_projax_docsite=globalThis.webpackChunk_projax_docsite||[]).push([[1307],{1184:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>l});var i=r(4041);const s={},t=i.createContext(s);function c(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(t.Provider,{value:n},e.children)}},4205:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"getting-started/architecture","title":"Architecture Overview","description":"projax is built as a monorepo with a modular architecture. All packages share a common core and use a unified JSON database.","source":"@site/docs/getting-started/architecture.md","sourceDirName":"getting-started","slug":"/getting-started/architecture","permalink":"/docs/getting-started/architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/josetwentyfour/projax/tree/main/packages/docsite/docs/getting-started/architecture.md","tags":[],"version":"current","frontMatter":{},"sidebar":"gettingStarted","previous":{"title":"Quick Start","permalink":"/docs/getting-started/quick-start"}}');var s=r(1085),t=r(1184);const c={},l="Architecture Overview",o={},a=[{value:"Package Structure",id:"package-structure",level:2},{value:"@projax/core",id:"projaxcore",level:3},{value:"@projax/cli",id:"projaxcli",level:3},{value:"@projax/api",id:"projaxapi",level:3},{value:"@projax/desktop",id:"projaxdesktop",level:3},{value:"@projax/prxi",id:"projaxprxi",level:3},{value:"Data Flow",id:"data-flow",level:2},{value:"Database Schema",id:"database-schema",level:2},{value:"Project",id:"project",level:3},{value:"Test",id:"test",level:3},{value:"ProjectPort",id:"projectport",level:3},{value:"Port Management",id:"port-management",level:2},{value:"Script Execution",id:"script-execution",level:2},{value:"Port Conflict Resolution",id:"port-conflict-resolution",level:2},{value:"API Server",id:"api-server",level:2},{value:"Future Architecture",id:"future-architecture",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"architecture-overview",children:"Architecture Overview"})}),"\n",(0,s.jsx)(n.p,{children:"projax is built as a monorepo with a modular architecture. All packages share a common core and use a unified JSON database."}),"\n",(0,s.jsx)(n.h2,{id:"package-structure",children:"Package Structure"}),"\n",(0,s.jsx)(n.h3,{id:"projaxcore",children:"@projax/core"}),"\n",(0,s.jsx)(n.p,{children:"The core package provides shared functionality used by all other packages:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Database Management"}),": JSON-based storage using lowdb"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Test Detection"}),": Framework detection and file scanning"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Port Scanning"}),": Extraction from configuration files"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Settings Management"}),": User preferences and configuration"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Location"}),": ",(0,s.jsx)(n.code,{children:"packages/core"})]}),"\n",(0,s.jsx)(n.h3,{id:"projaxcli",children:"@projax/cli"}),"\n",(0,s.jsx)(n.p,{children:"The command-line interface provides a full-featured CLI for project management:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Command parsing and execution"}),"\n",(0,s.jsx)(n.li,{children:"Script runner with port conflict detection"}),"\n",(0,s.jsx)(n.li,{children:"Background process management"}),"\n",(0,s.jsx)(n.li,{children:"Integration with core package"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Location"}),": ",(0,s.jsx)(n.code,{children:"packages/cli"})]}),"\n",(0,s.jsx)(n.h3,{id:"projaxapi",children:"@projax/api"}),"\n",(0,s.jsx)(n.p,{children:"REST API server built with Express:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"RESTful endpoints for all operations"}),"\n",(0,s.jsx)(n.li,{children:"Automatic port discovery (38124-38133)"}),"\n",(0,s.jsx)(n.li,{children:"CORS enabled for cross-origin requests"}),"\n",(0,s.jsx)(n.li,{children:"SQLite to JSON migration support"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Location"}),": ",(0,s.jsx)(n.code,{children:"packages/api"})]}),"\n",(0,s.jsx)(n.h3,{id:"projaxdesktop",children:"@projax/desktop"}),"\n",(0,s.jsx)(n.p,{children:"Electron-based desktop application:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"React-based UI"}),"\n",(0,s.jsx)(n.li,{children:"Integration with API server"}),"\n",(0,s.jsx)(n.li,{children:"File system picker for adding projects"}),"\n",(0,s.jsx)(n.li,{children:"Visual project management"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Location"}),": ",(0,s.jsx)(n.code,{children:"packages/desktop"})]}),"\n",(0,s.jsx)(n.h3,{id:"projaxprxi",children:"@projax/prxi"}),"\n",(0,s.jsx)(n.p,{children:"Interactive Terminal UI built with Ink:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Full-screen terminal interface"}),"\n",(0,s.jsx)(n.li,{children:"Keyboard navigation (vim bindings)"}),"\n",(0,s.jsx)(n.li,{children:"Real-time project information"}),"\n",(0,s.jsx)(n.li,{children:"Built with React and TypeScript"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Location"}),": ",(0,s.jsx)(n.code,{children:"packages/prxi"})]}),"\n",(0,s.jsx)(n.h2,{id:"data-flow",children:"Data Flow"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   CLI/TUI   \u2502\n\u2502   Desktop   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  @projax/   \u2502\n\u2502    core     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   JSON DB   \u2502\n\u2502 ~/.projax/  \u2502\n\u2502  data.json  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Desktop   \u2502\n\u2502     App     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 @projax/api \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  @projax/   \u2502\n\u2502    core     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   JSON DB   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.h2,{id:"database-schema",children:"Database Schema"}),"\n",(0,s.jsxs)(n.p,{children:["The JSON database (",(0,s.jsx)(n.code,{children:"~/.projax/data.json"}),") contains:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"{\n  projects: Project[],\n  tests: Test[],\n  project_ports: ProjectPort[],\n  settings: Setting[],\n  jenkins_jobs: JenkinsJob[]  // Future feature\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"project",children:"Project"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface Project {\n  id: number;\n  name: string;\n  path: string;\n  last_scanned: number | null;\n  created_at: number;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"test",children:"Test"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface Test {\n  id: number;\n  project_id: number;\n  file_path: string;\n  framework: string | null;\n  status: string | null;\n  last_run: number | null;\n  created_at: number;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"projectport",children:"ProjectPort"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface ProjectPort {\n  id: number;\n  project_id: number;\n  port: number;\n  script_name: string | null;\n  config_source: string;\n  last_detected: number;\n  created_at: number;\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"port-management",children:"Port Management"}),"\n",(0,s.jsx)(n.p,{children:"Ports are detected from multiple sources:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Configuration Files"}),": Vite, Next.js, Webpack, Angular, Nuxt configs"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Package.json Scripts"}),": Scripts with ",(0,s.jsx)(n.code,{children:"--port"}),", ",(0,s.jsx)(n.code,{children:"-p"}),", or ",(0,s.jsx)(n.code,{children:"PORT="})," patterns"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Environment Files"}),": ",(0,s.jsx)(n.code,{children:".env"})," files with port variables"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Error Messages"}),": Extracted from port conflict errors"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Ports are automatically scanned when:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Adding a project"}),"\n",(0,s.jsxs)(n.li,{children:["Running ",(0,s.jsx)(n.code,{children:"prx scan"})]}),"\n",(0,s.jsxs)(n.li,{children:["Running ",(0,s.jsx)(n.code,{children:"prx scan-ports"})]}),"\n",(0,s.jsx)(n.li,{children:"Listing projects (if ports are stale >24 hours)"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"script-execution",children:"Script Execution"}),"\n",(0,s.jsx)(n.p,{children:"The CLI supports multiple project types:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Node.js"}),": Reads ",(0,s.jsx)(n.code,{children:"package.json"}),", uses npm/yarn/pnpm"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Python"}),": Reads ",(0,s.jsx)(n.code,{children:"pyproject.toml"}),", supports Poetry"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Rust"}),": Uses ",(0,s.jsx)(n.code,{children:"cargo"})," commands"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Go"}),": Uses ",(0,s.jsx)(n.code,{children:"go"})," commands or Makefile"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Makefile"}),": Runs Makefile targets"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Scripts can run in:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Foreground"}),": Standard execution with full output"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Background"}),": Detached with logs saved to ",(0,s.jsx)(n.code,{children:"~/.projax/logs/"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"port-conflict-resolution",children:"Port Conflict Resolution"}),"\n",(0,s.jsx)(n.p,{children:"When a port conflict is detected:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Detection"}),": Port is checked before script execution or extracted from error"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Process Identification"}),": Finds the process using the port (cross-platform)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Resolution"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Interactive"}),": Prompts user to kill process"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Automatic"}),": Use ",(0,s.jsx)(n.code,{children:"--force"})," flag to auto-kill and retry"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"api-server",children:"API Server"}),"\n",(0,s.jsx)(n.p,{children:"The API server:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Automatically finds available port (38124-38133)"}),"\n",(0,s.jsxs)(n.li,{children:["Writes port to ",(0,s.jsx)(n.code,{children:"~/.projax/api-port.txt"})," for discovery"]}),"\n",(0,s.jsx)(n.li,{children:"Provides REST endpoints for all operations"}),"\n",(0,s.jsx)(n.li,{children:"Handles CORS for desktop app integration"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"future-architecture",children:"Future Architecture"}),"\n",(0,s.jsx)(n.p,{children:"Planned features:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Jenkins Integration"}),": Connect to local Jenkins instances"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Git Integration"}),": Show git status and branch information"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Notifications"}),": Alert on test failures or build status changes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Project Templates"}),": Quick project setup from templates"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/cli/overview",children:"CLI Documentation"})," - Learn about the CLI package"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/api/overview",children:"API Documentation"})," - Understand the API structure"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/core/overview",children:"Core Documentation"})," - Explore the core package"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);
"use strict";(globalThis.webpackChunk_projax_docsite=globalThis.webpackChunk_projax_docsite||[]).push([[3431],{3050:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>d,toc:()=>l});var c=s(3159),i=s(3572);const t={},r="Test Detection",d={id:"core/test-detection",title:"Test Detection",description:"The core package includes test framework detection and file scanning capabilities.",source:"@site/docs/core/test-detection.md",sourceDirName:"core",slug:"/core/test-detection",permalink:"/docs/core/test-detection",draft:!1,unlisted:!1,editUrl:"https://github.com/josetwentyfour/projax/tree/main/packages/docsite/docs/core/test-detection.md",tags:[],version:"current",frontMatter:{},sidebar:"core",previous:{title:"Core Database",permalink:"/docs/core/database"},next:{title:"Port Scanning",permalink:"/docs/core/port-scanning"}},o={},l=[{value:"Supported Frameworks",id:"supported-frameworks",level:2},{value:"Detection Methods",id:"detection-methods",level:2},{value:"1. Configuration Files",id:"1-configuration-files",level:3},{value:"2. Package.json Dependencies",id:"2-packagejson-dependencies",level:3},{value:"3. Test Scripts",id:"3-test-scripts",level:3},{value:"4. File Patterns",id:"4-file-patterns",level:3},{value:"Usage",id:"usage",level:2},{value:"Scanner Service",id:"scanner-service",level:2},{value:"Framework Detection",id:"framework-detection",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.h1,{id:"test-detection",children:"Test Detection"}),"\n",(0,c.jsx)(n.p,{children:"The core package includes test framework detection and file scanning capabilities."}),"\n",(0,c.jsx)(n.h2,{id:"supported-frameworks",children:"Supported Frameworks"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Jest"}),": ",(0,c.jsx)(n.code,{children:"*.test.js"}),", ",(0,c.jsx)(n.code,{children:"*.test.ts"}),", ",(0,c.jsx)(n.code,{children:"*.spec.js"}),", ",(0,c.jsx)(n.code,{children:"*.spec.ts"}),", ",(0,c.jsx)(n.code,{children:"__tests__/"})," directories"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Vitest"}),": Same patterns as Jest"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Mocha"}),": ",(0,c.jsx)(n.code,{children:"*.test.js"}),", ",(0,c.jsx)(n.code,{children:"*.spec.js"}),", ",(0,c.jsx)(n.code,{children:"test/"})," directories"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"detection-methods",children:"Detection Methods"}),"\n",(0,c.jsx)(n.h3,{id:"1-configuration-files",children:"1. Configuration Files"}),"\n",(0,c.jsx)(n.p,{children:"The detector looks for framework configuration files:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"jest.config.js"}),", ",(0,c.jsx)(n.code,{children:"jest.config.ts"}),", ",(0,c.jsx)(n.code,{children:"jest.config.json"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"vitest.config.ts"}),", ",(0,c.jsx)(n.code,{children:"vitest.config.js"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:".mocharc.js"}),", ",(0,c.jsx)(n.code,{children:".mocharc.json"}),", ",(0,c.jsx)(n.code,{children:"mocha.opts"})]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"2-packagejson-dependencies",children:"2. Package.json Dependencies"}),"\n",(0,c.jsxs)(n.p,{children:["Checks ",(0,c.jsx)(n.code,{children:"package.json"})," for framework dependencies:"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"jest"})," in dependencies or devDependencies"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"vitest"})," in dependencies or devDependencies"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"mocha"})," in dependencies or devDependencies"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"3-test-scripts",children:"3. Test Scripts"}),"\n",(0,c.jsxs)(n.p,{children:["Analyzes test scripts in ",(0,c.jsx)(n.code,{children:"package.json"}),":"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:'Scripts containing "jest", "vitest", or "mocha"'}),"\n",(0,c.jsx)(n.li,{children:"Test command patterns"}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"4-file-patterns",children:"4. File Patterns"}),"\n",(0,c.jsx)(n.p,{children:"Scans for test files matching patterns:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"*.test.js"}),", ",(0,c.jsx)(n.code,{children:"*.test.ts"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"*.spec.js"}),", ",(0,c.jsx)(n.code,{children:"*.spec.ts"})]}),"\n",(0,c.jsxs)(n.li,{children:["Files in ",(0,c.jsx)(n.code,{children:"__tests__/"})," directories"]}),"\n",(0,c.jsxs)(n.li,{children:["Files in ",(0,c.jsx)(n.code,{children:"test/"})," directories"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,c.jsx)(n.p,{children:"Test detection is typically used through the scanner service:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-typescript",children:"import { scanProject } from '@projax/core';\n\nconst result = scanProject(projectId);\n// Returns: { project, testsFound, tests }\n"})}),"\n",(0,c.jsx)(n.h2,{id:"scanner-service",children:"Scanner Service"}),"\n",(0,c.jsx)(n.p,{children:"The scanner service provides:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"scanProject(projectId: number)"}),": Scan a single project"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"scanAllProjects()"}),": Scan all projects"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"Both functions:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Detect test frameworks"}),"\n",(0,c.jsx)(n.li,{children:"Find test files"}),"\n",(0,c.jsx)(n.li,{children:"Update database with findings"}),"\n",(0,c.jsx)(n.li,{children:"Return scan results"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"framework-detection",children:"Framework Detection"}),"\n",(0,c.jsx)(n.p,{children:"The detector identifies frameworks in this order:"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsx)(n.li,{children:"Configuration files"}),"\n",(0,c.jsx)(n.li,{children:"Package.json dependencies"}),"\n",(0,c.jsx)(n.li,{children:"Test script patterns"}),"\n",(0,c.jsx)(n.li,{children:"File patterns (fallback)"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"/docs/core/api-reference",children:"API Reference"})," - Scanner functions"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"/docs/cli/commands/scan",children:"CLI Scan Command"})," - Using scan from CLI"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},3572:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>d});var c=s(1855);const i={},t=c.createContext(i);function r(e){const n=c.useContext(t);return c.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),c.createElement(t.Provider,{value:n},e.children)}}}]);
"use strict";(globalThis.webpackChunk_projax_docsite=globalThis.webpackChunk_projax_docsite||[]).push([[2569],{3572:(n,e,t)=>{t.d(e,{R:()=>a,x:()=>i});var r=t(1855);const o={},s=r.createContext(o);function a(n){const e=r.useContext(s);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:a(n.components),r.createElement(s.Provider,{value:e},n.children)}},7821:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var r=t(3159),o=t(3572);const s={},a="Integration",i={id:"api/integration",title:"Integration",description:"Learn how to integrate the projax API into your applications.",source:"@site/docs/api/integration.md",sourceDirName:"api",slug:"/api/integration",permalink:"/docs/api/integration",draft:!1,unlisted:!1,editUrl:"https://github.com/josetwentyfour/projax/tree/main/packages/docsite/docs/api/integration.md",tags:[],version:"current",frontMatter:{},sidebar:"api",previous:{title:"Error Handling",permalink:"/docs/api/error-handling"}},c={},l=[{value:"Finding the API Port",id:"finding-the-api-port",level:2},{value:"Method 1: Read Port File",id:"method-1-read-port-file",level:3},{value:"Method 2: Try Common Ports",id:"method-2-try-common-ports",level:3},{value:"JavaScript/TypeScript Integration",id:"javascripttypescript-integration",level:2},{value:"Basic Client",id:"basic-client",level:3},{value:"Python Integration",id:"python-integration",level:2},{value:"Shell Script Integration",id:"shell-script-integration",level:2},{value:"React Integration",id:"react-integration",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"CORS",id:"cors",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function p(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h1,{id:"integration",children:"Integration"}),"\n",(0,r.jsx)(e.p,{children:"Learn how to integrate the projax API into your applications."}),"\n",(0,r.jsx)(e.h2,{id:"finding-the-api-port",children:"Finding the API Port"}),"\n",(0,r.jsx)(e.p,{children:"The API runs on an automatically selected port. Discover it using one of these methods:"}),"\n",(0,r.jsx)(e.h3,{id:"method-1-read-port-file",children:"Method 1: Read Port File"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"const fs = require('fs');\nconst os = require('os');\nconst path = require('path');\n\nfunction getApiPort() {\n  const portFile = path.join(os.homedir(), '.projax', 'api-port.txt');\n  if (fs.existsSync(portFile)) {\n    return parseInt(fs.readFileSync(portFile, 'utf-8').trim(), 10);\n  }\n  return null;\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"method-2-try-common-ports",children:"Method 2: Try Common Ports"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"async function findApiPort() {\n  const ports = [3001, 3002, 3003, 3004, 3005];\n  for (const port of ports) {\n    try {\n      const response = await fetch(`http://localhost:${port}/health`);\n      if (response.ok) {\n        return port;\n      }\n    } catch (error) {\n      // Continue to next port\n    }\n  }\n  return null;\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"javascripttypescript-integration",children:"JavaScript/TypeScript Integration"}),"\n",(0,r.jsx)(e.h3,{id:"basic-client",children:"Basic Client"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:"class ProjaxClient {\n  private baseUrl: string;\n\n  constructor(port: number = 3001) {\n    this.baseUrl = `http://localhost:${port}/api`;\n  }\n\n  async getProjects(): Promise<Project[]> {\n    const response = await fetch(`${this.baseUrl}/projects`);\n    if (!response.ok) {\n      throw new Error('Failed to fetch projects');\n    }\n    return response.json();\n  }\n\n  async addProject(name: string, path: string): Promise<Project> {\n    const response = await fetch(`${this.baseUrl}/projects`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ name, path })\n    });\n    \n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error);\n    }\n    \n    return response.json();\n  }\n\n  async scanProject(id: number) {\n    const response = await fetch(`${this.baseUrl}/projects/${id}/scan`, {\n      method: 'POST'\n    });\n    \n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error);\n    }\n    \n    return response.json();\n  }\n}\n\n// Usage\nconst client = new ProjaxClient(3001);\nconst projects = await client.getProjects();\n"})}),"\n",(0,r.jsx)(e.h2,{id:"python-integration",children:"Python Integration"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'import requests\nimport os\nimport json\n\nclass ProjaxClient:\n    def __init__(self, port=3001):\n        self.base_url = f"http://localhost:{port}/api"\n    \n    def get_port(self):\n        """Try to read port from file or use default"""\n        port_file = os.path.join(os.path.expanduser("~"), ".projax", "api-port.txt")\n        if os.path.exists(port_file):\n            with open(port_file, \'r\') as f:\n                return int(f.read().strip())\n        return 3001\n    \n    def get_projects(self):\n        """Get all projects"""\n        response = requests.get(f"{self.base_url}/projects")\n        response.raise_for_status()\n        return response.json()\n    \n    def add_project(self, name, path):\n        """Add a new project"""\n        response = requests.post(\n            f"{self.base_url}/projects",\n            json={"name": name, "path": path}\n        )\n        response.raise_for_status()\n        return response.json()\n    \n    def scan_project(self, project_id):\n        """Scan a project for tests"""\n        response = requests.post(f"{self.base_url}/projects/{project_id}/scan")\n        response.raise_for_status()\n        return response.json()\n\n# Usage\nclient = ProjaxClient()\nprojects = client.get_projects()\n'})}),"\n",(0,r.jsx)(e.h2,{id:"shell-script-integration",children:"Shell Script Integration"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'#!/bin/bash\n\n# Get API port\nAPI_PORT=$(cat ~/.projax/api-port.txt 2>/dev/null || echo "3001")\nAPI_URL="http://localhost:${API_PORT}/api"\n\n# Get all projects\nget_projects() {\n  curl -s "${API_URL}/projects" | jq \'.\'\n}\n\n# Add a project\nadd_project() {\n  local name="$1"\n  local path="$2"\n  curl -s -X POST "${API_URL}/projects" \\\n    -H "Content-Type: application/json" \\\n    -d "{\\"name\\": \\"${name}\\", \\"path\\": \\"${path}\\"}" | jq \'.\'\n}\n\n# Scan a project\nscan_project() {\n  local id="$1"\n  curl -s -X POST "${API_URL}/projects/${id}/scan" | jq \'.\'\n}\n\n# Usage\nget_projects\nadd_project "My Project" "/path/to/project"\nscan_project 1\n'})}),"\n",(0,r.jsx)(e.h2,{id:"react-integration",children:"React Integration"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:"import { useState, useEffect } from 'react';\n\nfunction useProjaxAPI(port: number = 3001) {\n  const [projects, setProjects] = useState<Project[]>([]);\n  const [loading, setLoading] = useState(true);\n  const baseUrl = `http://localhost:${port}/api`;\n\n  useEffect(() => {\n    fetch(`${baseUrl}/projects`)\n      .then(res => res.json())\n      .then(data => {\n        setProjects(data);\n        setLoading(false);\n      })\n      .catch(error => {\n        console.error('Failed to fetch projects:', error);\n        setLoading(false);\n      });\n  }, []);\n\n  const addProject = async (name: string, path: string) => {\n    const response = await fetch(`${baseUrl}/projects`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ name, path })\n    });\n    \n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error);\n    }\n    \n    const newProject = await response.json();\n    setProjects([...projects, newProject]);\n    return newProject;\n  };\n\n  return { projects, loading, addProject };\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(e.p,{children:"Always handle errors appropriately:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-typescript",children:"try {\n  const project = await client.addProject(name, path);\n  console.log('Project added:', project);\n} catch (error) {\n  if (error.message.includes('already exists')) {\n    // Handle duplicate\n  } else if (error.message.includes('not found')) {\n    // Handle not found\n  } else {\n    // Handle other errors\n  }\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"cors",children:"CORS"}),"\n",(0,r.jsx)(e.p,{children:"The API has CORS enabled for all origins, so you can make requests from:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Browser applications"}),"\n",(0,r.jsx)(e.li,{children:"Electron apps"}),"\n",(0,r.jsx)(e.li,{children:"Other web applications"}),"\n",(0,r.jsx)(e.li,{children:"Any HTTP client"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"/docs/api/endpoints",children:"Endpoints"})," - Complete endpoint reference"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"/docs/api/error-handling",children:"Error Handling"})," - Error handling guide"]}),"\n"]})]})}function d(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(p,{...n})}):p(n)}}}]);